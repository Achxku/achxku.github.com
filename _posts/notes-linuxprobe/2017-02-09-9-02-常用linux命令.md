---
layout: post
title: "必须掌握的linux命令"
date: 2017-2-9 
description: 必须掌握的 linux 命令
tags: 
 - linux
 - RHCE 
 - linux命令
---

# 必须掌握的 linux 命令

----------

**简述**
- 系统内核、shell 终端的关系与作用
- bash 解释器的 4 大优势
- linux 命令的执行方法

----------

## 强大好用的 shell

计算机硬件：运算器、控制器、存储器、输入/输出设备

内核：控制、管理各种硬件设备的一种软件，负责驱动硬件、管理活动和分配/管理硬件资源等等任务

用户通过基于“系统调用接口”开发出的程序/服务来管理计算机，满足咱们的日常工作

linux 系统管理员 <===> 应用程序 <===> 系统调用接口 <===> 内核 <===> 硬件

**命令能完成所有的工作任务，相对与图形界面消耗的资源少，更安全更准确更高效**

shell --- 也可以称为“壳”，充当人与内核（硬件）的翻译官

主流默认 shell 是 bash （bourne-again shell）

bash 的四项优势：

1. 通过上下方向键来调取过往执行过的命令
2. Tab 键补全功能
3. 强大的批处理脚本
4. 实用的环境变量

好用、使用广泛

----------

## 常用命令

linux 命令的格式：

**命令名称** [命令选项参数] [命令的操作对象]

> 命令 参数 对象  三者之间要用空格分隔开

命令参数格式分`长格式`和`短格式`

> 长格式： ls --help  用两个 --
> 短格式： ls -l  用一个 -
> 短格式可以合并： ls -alh
> 可以没有参数或对象，但是必须有命令
> 参数让命令更加符合工作的需要，定制化命令

----------

`man` 命令：查看命令、配置文件等的帮助文档

```
man  man  # 查看 man 命令的帮助文档
```

man 命令的常用操作：

按键|	用处
----|------
空格键|	向下翻一页。
[Page Down]|	向下翻一页。
[Page Up]	|向上翻一页。
[HOME]	|直接前往首页。
[END]	|直接前往尾页。
/关键词	|从上至下搜索某个关键词,如"/linux"。
?关键词	|从下至上搜索某个关键词,如"?linux"。
n	|定位到下一个搜索到的关键词。
N	|定位到上一个搜索到的关键词。
q	|退出帮助文档。

帮助文档的目录结构：

结构名称	|代表意义
--------|-------
NAME	|命令的名称
SYNOPSIS	|参数的大致使用方法
DESCRIPTION	|介绍说明
EXAMPLES	|演示（附带简单说明）
OVERVIEW	|概述
DEFAULTS	|默认的功能
OPTIONS	|具体的可用选项（带介绍）
ENVIRONMENT	|环境变量
FILES	|用到的文件
SEE ALSO	|相关的资料
HISTORY	|维护历史与联系方式

----------

**常用系统工作命令**

`echo` 命令：打印字符，命令的执行结果，变量的值

例子：

```
echo  linuxprobe  # 打印字符
echo  $SHELL    # 打印变量的值
echo  $(date)   # 打印命令的执行结果
```

----------

`date` 命令：显示或设置系统时间或日期

date [选项] [指定的格式]

例子：

```
date   # 显示系统当前时间
date  "+%y-%m-%d %H:%M:%S"  # 按指定格式显示
date  -s  "20160901 8:30:00"  # 设置系统时间
```

----------

`hwclock` 命令  `clock` 命令：显示或设置硬件时间

例子：

```
clock -r  # 显示硬件时间   
clock --show 

```

----------

`reboot` 命令：重启系统

`poweroff` 命令：关闭系统

`shutdown` 命令：关机或重启系统


----------

`wget` 命令：下载文件

例子：

```
wget  http://文件所在地址 

wget -r -p http://www.linuxprobe.com  # 递归下载整个站点的内容
```

----------

`ps` 命令：查看系统进程状态

例子：

```
ps aux  
```

linux 系统中进程的 5 种不同状态

> R (运行): 正在运行或在运行队列中等待。
> 
> S (中断): 休眠中, 在等待某个条件的形成或接收到信号。
> 
> D (不可中断): 收到信号不唤醒和不可运行, 进程必须等待直到有中断发生。
> 
> Z (僵死): 进程已终止, 但进程描述符存在, 直到父进程调用wait4()系统调用后释放。
> 
> T (停止): 进程收到SIGSTOP, SIGSTP, SIGTIN, SIGTOU信号后停止运行。
 
![](http://i.imgur.com/Etav02B.jpg)

----------

`top` 命令：动态监视进程活动与系统负载等信息

![](http://i.imgur.com/T39XyMU.jpg)

前面的五行为系统整体的统计信息：

> 第1行:系统时间，运行时间，登录终端数，系统负载（分别为1分钟、5分钟、15分钟的平均值）。
> 
> 第2行:进程总数，运行中的，睡眠中的，停止的，僵死的。
> 
> 第3行:用户占用资源，系统内核占用资源，改变过优先级的进程，空闲的资源，等待输入输出的时间。
> 此行数据均为CPU数据并以百分比格式显示，例如"99.2 id"意味着有99.2%的CPU资源正在空闲中。
> 
> 第4行:物理内存总量，使用量，空闲量，作为内核缓存的内存量。
> 
> 第5行:虚拟内存总量，使用量，空闲量，已被提前加载的内存数据。

----------

`pidof` 命令：查询某个指定服务的进程 PID 

例子：

```
pidof  sshd
```

----------

`kill` 命令：终止某个指定的 pid 号码的进程

例子：

```
pidof sshd  # 查看 sshd 服务的进程号
kill  4125  # 终止 pid 号为 4125 的进程
killall  sshd  # 终止服务 sshd 的所有进程
```

----------

ctrl+c 终止某个正在执行的命令

& 把某条命令放在后台执行

例子：

```
ls -alh &  # 在后台执行该操作
```

----------

## 系统状态命令

`ifconfig` 命令：获取网卡配置与网络状态等信息

网卡名称、inet 参数后面的 IP 地址、ether 参数后面的物理 mac 地址以及 RX、TX 的接收与发送数据包的大小：

![](http://i.imgur.com/Rtz3fyd.png)

----------

`uname` 命令：查看系统内核与系统版本等信息

当前系统的内核名称、主机名、内核发行版本、节点名、系统时间、硬件名称、硬件平台、处理器类型以及操作系统名称等信息:

例子：

```
uname -a 
```

系统详细版本信息保存文件： /etc/os-release

```
cat /etc/os-release
```
----------

`uptime` 命令：查看系统负载信息

显示当前系统时间、系统已运行时间、当前登录用户以、平均负载值 等信息数据

`watch -n 1 uptime` # 没秒钟刷新一次

`who` 命令：查看当前登录的用户终端信息

`w` 命令：uptime 命令 + who 命令

`free` 命令：显示当前系统内存使用信息

```
free -h 
```

----------

`last` 命令：查看系统所有登入记录（仅供参考）

`history` 命令：显示历史执行过的命令

例子：

```
history  

history -c  # 清空历史记录命名
```

配置文件： /etc/profile  --> HISTSIZE  .bash_history

使用上下箭头调阅历史执行过的命令，!编号 执行历史第某条命令  ！字符  执行历史以某字符开始的命令

----------

`sosreport` 命令：收集系统配置并诊断后输出结论文档

----------

`pwd` 命令：显示当前所处工作目录

`cd` 命令：切换工作路径

例子：

```
cd  /etc/  # 切换到指定的目录
cd  或 cd ~  # 切换到用户家目录
cd -  # 返回到上一次所在目录
cd ..  # 切换到当前目录的上一级目录
```

----------

`ls` 命令：显示目录中的内容

例子：

```
ls -al  # 显示当前目录内的所有内容
ls -d  /etc # 显示指定目录本身的信息

```

----------

## 文本编辑命令

`cat` 命令：查看较短的纯文本文件

例子：

```
cat -n xxx  # 查看某文件，并显示行号
```

`more` 命令：查看较长的纯文本文件

例子：

```
more  xxx  # 查看某文件
```

`head` 命令：查看纯文本的前 N 行，默认 10 行

例子：

```
head -n 20  xxx  # 查看某文件前 20 行
```

`tail` 命令：查看纯文本文档的后 N 行，默认 10 行

例子：

```
tail -n 20 xxx  # 查看某文件的后 20 行
tail -f /var/log/messages  # 持续刷新某个文件的内容
```

`tr` 命令：替换文本中的字符

tr [原始字符] [目标字符]

例子：

```
cat xxx | tr [a-z] [A-Z]  # 把所有小写字母替换为大写字母
```

`wc` 命令：统计指定文本的行数、字数、字节数

wc [参数] 文本文件

-l 统计行数  -w 统计单词数  -c 统计字节数

例子：

```
wc -l /etc/passwd   # 统计 passwd 文件的行数
```

`stat` 命令：查看文件具体存储信息和时间

例子：

```
stat xxx  # 查看某文件的信息
```

`cut` 命令：截取文本字符

cut [参数] 文本

-f 指定截取的列 -d 指定间隔符号

例子：

```
head -n 2 /etc/passwd | cut -d: -f1  # 显示 passwd 文件的头 2 行，并按 ： 分隔截取第一列
```

`diff` 命令：比较多个文本文件的差异

diff [参数] 文件1 文件2 ...

--brief 判断两个文件是否不同  -c 详细比较文件的差异

例子：

```
diff --brief  diff_a  diff_b  # 判断文件是否相同

diff -c diff_a  diff_b  # 详细比较文件的不同
```

----------

## 文件目录管理命令

一定要掌握对文件的**创建**、**修改**，**复制**、**剪切**、**更名**与**删除**等操作

`touch` 命令：创建空白文件与设置文件的各种修改时间

touch [选项] 文件

文件内容的修改时间（mtime）、文件权限或属性更改时间（ctime）、文件读取时间（atime）

-a 修改文件访问时间（atime） -m 修改更改时间（mtime） -d 修改 atime 和 mtime

例子：

```
ls -l xxx  # 查看文件信息
echo "xxx" >> xxxx  # 修改文件内容
ls -l xxx  # 查看文件信息
touch -d "时间" xxx  # 修改文件的时间属性
ls -l xxx  # 查看文件信息
```

`mkdir` 命令：创建空白的文件夹

mkdir [选项] 目录名称

-p 创建父目录

例子：

```
mkdir linuxprobe   # 创建一个空白目录
mkdir -p linuxprobe/a/b  # 创建目录 b 的同时创建其父目录 a
```

`cp` 命令：复制文件或者目录

cp [选项] 源文件/目录 目标文件/目录

-p 保留原始文件的属性  
-d 保留链接文件的属性
-r 递归持续复制（目录）
-i 询问是否覆盖
-a 相当于 -pdr  保留文件的所有属性递归复制

例子：

```
touch install.log  # 创建一个文件
cp install.log x.log  # 复制一个文件（备份）
```

`mv` 命令：移动文件或重命名

mv [选项] 源文件/目录  目标文件/目录

例子：

```
mv x.log linux.log  # 把 x.log 重命名为 linux.log
```

`rm` 命令：删除文件或目录

rm [选项] 文件/目录

-f 直接删除不显示提示信息  -r 删除目录

例子：

```
ls
rm install.log  
rm -f linux.log
```

`dd` 命令：指定大小的拷贝文件或转换文件

dd [选项]

参数	|作用
----|-----
if	|输入的文件名称。（数据来源）
of	|输出的文件名称。（数据去处）
bs	|设置每个“块”的大小。
count	|设置要拷贝“块”的个数。

例子：

```
dd if=/dev/zero of=2_file bs=1M count=2  
# 从 /dev/zero 中提取数据，输出到 2_file 中，块大小为 1M ，数据块个数为 2 个

dd if=/dev/cdrom of=RHEL-server-7.0-x86_64.iso
# 把光盘设备内的内容复制并压制为一个 iso 镜像文件
```

`file` 命令：查看文件类型

file 文件名

linux 中一切皆文件，我们不能通过文件的后缀名来判断文件的类型，而且没有扩展名一说

例子：

```
file  xxx  # 查看某个文件的文件类型
```

----------

## 打包压缩命令

`tar` 命令：对文件打包/解包、压缩/解压

tar [选项] [文件/目录]

参数|作用
---|----
-c | 创建打包文件
-x | 解包
-z | 使用 gzip 工具压缩/解压文件
-j | 使用 bzip2 工具压缩/解压文件
-v | 显示压缩/解压过程
-C | 指定解压到目标路径
-f | 指定压缩后的文件名或要解压的文件名（-f 后面紧跟文件名）

例子：

```
tar -czvf etc.tar.gz /etc  # 打包并用 gzip 工具压缩 /etc 目录

mkdir /root/etc
tar -xzvf etc.tar.gz -C /root/etc  # 解压到指定的目录
```

`grep` 命令：对文本内容进行关键字搜索匹配

grep [选项] [文件]

-n 显示搜索到的信息的行号
-v 排除搜索到的信息

例子：

```
grep /sbin/nologin /etc/passwd  
grep -v /bash /etc/passwd
grep -n /bash /etc/passwd
```

`find` 命令：查找文件

find 查找路径 查找条件 操作

参数	|作用
----|----
-name	|匹配名称
-perm	|匹配权限（mode为完全匹配，-mode为包含即可）
-user	|匹配所有者
-group	|匹配所有组
-mtime -n +n|	匹配修改内容的时间（-n指n天以内，+n指n天以前）
-atime -n +n	|匹配访问文件的时间-n指n天以内，+n指n天以前
-ctime -n +n	|匹配修改权限的时间-n指n天以内，+n指n天以前
-nouser	|匹配无所有者的文件
-nogroup	|匹配无所有组的文件
-newer f1 !f2	|匹配比文件f1新却比f2旧的文件
--type b/d/c/p/l/f|	匹配文件类型（块设备、目录、字符设备、管道、链接文件、文件文件）
-size	|匹配文件的大小（+50k查找超过50k的文件,而-50k则代表查找小于50k的文件）
-prune	|忽略某个目录
-exec {} \;	|后面可接对搜索到结果进一步处理的命令（下面会有演示）

--exec {} \;  对搜索到的结果做进一步处理

例子：

```
find /etc/ -name "host*" -print
find / -perm -4000 -print
```

在整个的文件系统中找出所有归属于 linuxprobe 用户的文件并复制到/root/findresults目录

```
find / -user linuxprobe -exec cp -af {} /root/findresults/ \;
# {} 表示前面 find 搜索到的文件
```

----------

## 命令汇总

man 查看帮助文档
echo 打印字符
date 显示或设置系统时间
reboot 重启
poweroff 关机
shutdown 
wget 下载
ps 系统进程状态
top 系统进程活动动态，负载
pidof 进程 PID 号
kill 终止进程
killall 终止服务
ifconfig 查看网卡信息
uname 系统内核和系统版本
uptime 系统负载，运行时间
who 当前登入用户终端信息
w
free 查看内存信息
last 统计所有登入记录
history 查看历史命令记录
sosreport 搜集系统配置并诊断输出结论文档
pwd 打印当前工作目录
cd 切换工作路径
ls 显示目录下的内容
cat 查看较短的文本文件
more 查看较长的文本文件
head 查看文件前 N 行
tail 查看文件尾 N 行
tr 替换字符
wc 统计文件行、字、字节
stat 查看文件时间属性
cut 截取字符
diff 文件对比
touch 创建文件或修改文件时间属性
mkdir 创建目录
cp 复制文件/目录
mv 移动或重命名文件/目录
rm 删除文件/目录
dd 拷贝文件或转换文件
file 查看文件类型
tar 打包
grep 按关键字搜寻文件
find 按条件查找文件

----------

## 作业

1:请问在红帽 RHEL7 系统中的默认 Shell 解释器是什么？

答案：默认的解释器为 **bash**。
2:如果希望在帮助文档 man 向下翻，可以有什么方法？

答案:可以点击键盘的 **↓**，也可以选择 PageDown 或 End 。
3:mv 命令不但可以转移文件，还常常用来做什么？

答案：mv 命令还可以用来**重命名**文件。
 

4:find 命令可以基于什么条件搜索文件？

答案：可以基于**文件名称**、**大小**、**类型**、**时间**、**所有者/组**、**新旧**等等条件。


----------

2017-2-9 by Achxku

















